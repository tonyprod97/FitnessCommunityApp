@model ChartViewModel
@{
    ViewBag.Data = Json.Serialize(ViewBag.WeightLogs);
}
<div class="row">
    <form method="post">
        <div class="col-sm-4">
            <label asp-for="StartingDate"></label>
            <input asp-for="StartingDate" />
            <button class="btn btn-default" type="submit">Apply</button>
        </div>
        <div class="col-sm-4">
            <label asp-for="NumberOfLogs"></label>
            <input asp-for="NumberOfLogs" />
            <button class="btn btn-default" type="submit">Apply</button>
        </div>
    </form>
</div>

@await Html.PartialAsync("_ChartPartial")

@section Scripts
    {
    <script>
        var data = [];
        var serverData = @ViewBag.Data;

        for (var index = 0; index < serverData.length; index++) {
            data[index] = {
                x: new Date(serverData[index].logDate),
                y: serverData[index].weightValue
            }

        }

        $(document).ready(function () {



            var options = {
                title: {
                    text: "@ViewBag.Title"
                },
                animationEnabled: true,
                exportEnabled: true,
                data: [
                    {
                        type: "spline",
                        dataPoints: data
                    }
                ]
            };
            $("#chartContainer").CanvasJSChart(options);

        });
    </script>
    <environment include="Development">
        <script src="~/lib/jquery/dist/jquery.canvasjs.min.js"></script>
    </environment>
    <environment exclude="Development">
        <script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
        <script src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>
    </environment>
}