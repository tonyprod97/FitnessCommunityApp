@model ChartViewModel
@{
    ViewBag.Data = Json.Serialize(ViewBag.WeightLogs);
}

<form method="post">
    <div class="row">
        <label asp-for="StartingDate"></label>
        <input asp-for="StartingDate" />
        <button class="btn btn-default" type="submit">Apply</button>
    </div>
</form>
<hr />
<div id="chartContainer"></div>

@section Scripts
    {
    <script>
        var data = [];
        var serverData = @ViewBag.Data;

        for (var index = 0; index < serverData.length; index++) {
            data[index] = {
                x: new Date(serverData[index].logDate),
                y : serverData[index].weightValue
            }

        }
        console.log(serverData, data);

        $(document).ready(function () {
            
            
            
            var options = {
                title: {
                    text: "@ViewBag.Title"
                },
                animationEnabled: true,
                exportEnabled: true,
                data: [
                    {
                        type: "spline", 
                        dataPoints: data
                    }
                ]
            };
            $("#chartContainer").CanvasJSChart(options);

        });
    </script>
    <environment include="Development">
        <script src="~/lib/jquery/dist/jquery.canvasjs.min.js"></script>
    </environment>
    <environment exclude="Development">
        <script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
        <script src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>
    </environment>
}